<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Registration</title>
        <script>

            function validateEmail()
                    {
                    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                            var email = $.trim($("#registrationForm\\:email").val());
                            if (email == ''){
                    $("#registrationForm\\:emailMsg").text("");
                            $("#registrationForm\\:emailMsg").attr("class", "");
                            return;
                            }
                    if (emailReg.test(email)) {
                    $("#registrationForm\\:emailMsg").text("Valid Email");
                            $("#registrationForm\\:emailMsg").attr("class", "ui-messages-info ui - widget ui - corner - all ui - messages - info - summary");
                            } else {
                    $("#registrationForm\\:emailMsg").text("Invalid Email");
                            $("#registrationForm\\:emailMsg").attr("class", "ui-message-error ui - widget ui - corner - all ui - message - error - detail");
                            }
                    }

        </script>
    </h:head>
    <body>
        <h:form id="registrationForm">
            <p:panel header="Registration Form" style="width: 800px;">
                <p:messages />
                <h:panelGrid columns="3">

                    <p:outputLabel value="UserName:*"/>
                    <p:inputText id="userName" value="#{userController.
                                                        registrationUser.userName}"
                                 required="true" label="UserName" >
                        <p:ajax event="keyup" update="userNameMsg"/>
                    </p:inputText>
                    <p:message id="userNameMsg" for="userName"/>


                    <p:outputLabel value="Password:*"/>
                    <p:password id="password" value="#{userController.
                                                       registrationUser.password}"
                                required="true" label="Password">
                        <f:validateLength minimum="4"/>
                        <p:ajax update="passwordMsg" event="keyup"/>
                    </p:password>
                    <p:message id="passwordMsg" for="password"/>

                    <p:outputLabel value="FirstName:*"/>
                    <p:inputText id="firstName" value="#{userController.
                                                         registrationUser.firstName}"
                                 required="true" label="FirstName">
                        <p:ajax event="keyup" update="firstNameMsg"/>
                    </p:inputText>
                    <p:message id="firstNameMsg" for="firstName"/>

                    <p:outputLabel value="LastName:"/>
                    <p:inputText id="lastName" value="#{userController.registrationUser.lastName}"/>
                    <p:message id="lastNameMsg" for="lastName"/>
                    <p:outputLabel value="Email:"/>
                    <p:inputText id="email" 
                                 onchange="validateEmail();"
                                 value="#{userController.registrationUser.email}"/>
                    <p:message id="emailMsg" for="email"/>
                    <p:outputLabel value=""/>
                    <p:commandButton action="#{userController.register}"
                                     value="Register" update="registrationForm"/>
                    <p:outputLabel value=""/>
                </h:panelGrid>
            </p:panel>
        </h:form>
    </body>
</html>